/*
 * Decompiled with CFR 0.152.
 * 
 * Could not load the following classes:
 *  net.minecraft.client.entity.EntityPlayerSP
 *  net.minecraft.entity.Entity
 *  net.minecraft.item.ItemBow
 *  net.minecraft.network.Packet
 *  net.minecraft.network.play.client.CPacketEntityAction
 *  net.minecraft.network.play.client.CPacketEntityAction$Action
 *  net.minecraft.network.play.client.CPacketPlayer$Position
 *  net.minecraft.network.play.client.CPacketPlayerDigging
 *  net.minecraft.network.play.client.CPacketPlayerDigging$Action
 */
package i.gishreloaded.deadcode.hacks.exploit;

import i.gishreloaded.deadcode.hack.Hack;
import i.gishreloaded.deadcode.hack.HackCategory;
import i.gishreloaded.deadcode.value.types.IntegerValue;
import i.gishreloaded.deadcode.wrappers.Wrapper;
import net.minecraft.client.entity.EntityPlayerSP;
import net.minecraft.entity.Entity;
import net.minecraft.item.ItemBow;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketEntityAction;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.network.play.client.CPacketPlayerDigging;

public class DeathBow
extends Hack {
    public IntegerValue a;
    public long b = 0L;

    public DeathBow(String string) {
        super(string, HackCategory.Exploit);
        this.b("General");
        this.a = new IntegerValue("Power", 50, 1, 100);
        this.a(this.a);
        this.b("Other");
    }

    @Override
    public String getDescription() {
        return "Deadly bow, the one shoot - one kill.";
    }

    @Override
    public void onEnable() {
        this.b = System.currentTimeMillis();
        super.onEnable();
    }

    @Override
    public boolean a(Object object, bw bw2) {
        if (object instanceof CPacketPlayerDigging) {
            CPacketPlayerDigging cPacketPlayerDigging = (CPacketPlayerDigging)object;
            EntityPlayerSP entityPlayerSP = Wrapper.INSTANCE.getLocalPlayer();
            if (cPacketPlayerDigging.getAction() == CPacketPlayerDigging.Action.RELEASE_USE_ITEM && !entityPlayerSP.getHeldItemMainhand().isEmpty() && entityPlayerSP.getHeldItemMainhand().getItem() instanceof ItemBow && System.currentTimeMillis() - this.b >= 500L) {
                this.b = System.currentTimeMillis();
                Wrapper.INSTANCE.sendPacket((Packet)new CPacketEntityAction((Entity)entityPlayerSP, CPacketEntityAction.Action.START_SPRINTING));
                for (int i2 = 0; i2 < this.a.getValue(); ++i2) {
                    Wrapper.INSTANCE.sendPacket((Packet)new CPacketPlayer.Position(entityPlayerSP.posX, entityPlayerSP.posY - 1.0E-10, entityPlayerSP.posZ, true));
                    Wrapper.INSTANCE.sendPacket((Packet)new CPacketPlayer.Position(entityPlayerSP.posX, entityPlayerSP.posY + 1.0E-10, entityPlayerSP.posZ, false));
                }
            }
        }
        return super.a(object, bw2);
    }
}

