/*
 * Decompiled with CFR 0.152.
 * 
 * Could not load the following classes:
 *  net.minecraft.network.Packet
 *  net.minecraft.network.play.client.CPacketPlayerDigging
 *  net.minecraft.network.play.client.CPacketPlayerDigging$Action
 *  net.minecraft.network.play.server.SPacketBlockChange
 *  net.minecraft.util.EnumFacing
 *  net.minecraft.util.math.BlockPos
 *  net.minecraftforge.fml.common.gameevent.TickEvent$PlayerTickEvent
 */
package i.gishreloaded.deadcode.hacks.exploit;

import i.gishreloaded.deadcode.hack.Hack;
import i.gishreloaded.deadcode.hack.HackCategory;
import i.gishreloaded.deadcode.utils.TimerUtils;
import i.gishreloaded.deadcode.utils.visual.ChatUtils;
import i.gishreloaded.deadcode.value.types.IntegerValue;
import i.gishreloaded.deadcode.wrappers.Wrapper;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import net.minecraft.network.play.server.SPacketBlockChange;
import net.minecraft.util.EnumFacing;
import net.minecraft.util.math.BlockPos;
import net.minecraftforge.fml.common.gameevent.TickEvent;

public class NoCom
extends Hack {
    public IntegerValue a = new IntegerValue("Radius", 10000, 100, 20000);
    public IntegerValue b = new IntegerValue("Delay", 200, 0, 1000);
    public IntegerValue c = new IntegerValue("Packets", 1, 1, 10);
    public TimerUtils d;
    public static int e = -1;
    public int f;
    public int g;
    public boolean h;

    public NoCom(String string) {
        super(string, HackCategory.Exploit);
        this.b("General");
        this.a(this.a, this.b, this.c);
        this.b("Other");
        this.d = new TimerUtils();
    }

    @Override
    public String getDescription() {
        return "Player finder in all world.";
    }

    @Override
    public void onEnable() {
        int n2 = this.a.getValue();
        this.f = -n2;
        this.g = -n2;
        super.onEnable();
    }

    @Override
    public void onPlayerTickEvent(TickEvent.PlayerTickEvent playerTickEvent) {
        if (!this.d.isReached(this.b.getValue().longValue())) {
            return;
        }
        int n2 = this.a.getValue();
        for (int i2 = 0; i2 < this.c.getValue(); ++i2) {
            if (this.h) {
                if (this.f < n2) {
                    this.f += 100;
                } else {
                    this.f = -n2;
                    this.h = false;
                }
                if (this.g < n2) {
                    this.g += 100;
                } else {
                    this.g = -n2;
                    this.h = false;
                }
            } else if (this.f < n2) {
                this.f += 100;
            } else if (this.g < n2) {
                this.g += 100;
            } else {
                this.f = -n2;
                this.g = -n2;
                this.h = true;
            }
            Wrapper.INSTANCE.sendPacket((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.START_DESTROY_BLOCK, new BlockPos(this.f, 1, this.g), EnumFacing.DOWN));
        }
        this.d.resetTime();
        super.onPlayerTickEvent(playerTickEvent);
    }

    @Override
    public boolean a(Object object, bw bw2) {
        if (object instanceof SPacketBlockChange) {
            SPacketBlockChange sPacketBlockChange = (SPacketBlockChange)object;
            if (sPacketBlockChange.getBlockPosition() == null) {
                return true;
            }
            int n2 = sPacketBlockChange.getBlockPosition().getX();
            int n3 = sPacketBlockChange.getBlockPosition().getY();
            int n4 = sPacketBlockChange.getBlockPosition().getZ();
            if (Wrapper.INSTANCE.getLocalPlayer().getDistance((double)n2, (double)n3, (double)n4) < 100.0) {
                return true;
            }
            ChatUtils.warning(String.format("Player found on X: %s Y: %s Z: %s", n2, n3, n4));
        }
        return super.a(object, bw2);
    }
}

