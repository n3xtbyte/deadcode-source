/*
 * Decompiled with CFR 0.152.
 * 
 * Could not load the following classes:
 *  joptsimple.internal.Strings
 *  net.minecraft.network.Packet
 *  net.minecraft.network.play.client.CPacketTabComplete
 *  net.minecraft.network.play.server.SPacketTabComplete
 */
package i.gishreloaded.deadcode.hacks.exploit;

import i.gishreloaded.deadcode.hack.Hack;
import i.gishreloaded.deadcode.hack.HackCategory;
import i.gishreloaded.deadcode.utils.visual.ChatUtils;
import i.gishreloaded.deadcode.wrappers.Wrapper;
import java.util.ArrayList;
import java.util.Collections;
import joptsimple.internal.Strings;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketTabComplete;
import net.minecraft.network.play.server.SPacketTabComplete;

public class PluginsGetter
extends Hack {
    public PluginsGetter(String string) {
        super(string, HackCategory.Exploit);
    }

    @Override
    public String getDescription() {
        return "Show all plugins on current server.";
    }

    @Override
    public void onEnable() {
        if (Wrapper.INSTANCE.getLocalPlayer() == null) {
            return;
        }
        Wrapper.INSTANCE.sendPacket((Packet)new CPacketTabComplete("/", null, false));
        super.onEnable();
    }

    @Override
    public boolean a(Object object, bw bw2) {
        if (object instanceof SPacketTabComplete) {
            SPacketTabComplete sPacketTabComplete = (SPacketTabComplete)object;
            ArrayList<String> arrayList = new ArrayList<String>();
            String[] stringArray = sPacketTabComplete.getMatches();
            for (int i2 = 0; i2 < stringArray.length; ++i2) {
                String string;
                String[] stringArray2 = stringArray[i2].split(":");
                if (stringArray2.length <= 1 || arrayList.contains(string = stringArray2[0].replace("/", ""))) continue;
                arrayList.add(string);
            }
            Collections.sort(arrayList);
            if (!arrayList.isEmpty()) {
                ChatUtils.info("Plugins \u00a77(\u00a78" + arrayList.size() + "\u00a77): \u00a79" + Strings.join((String[])arrayList.toArray(new String[0]), (String)"\u00a77, \u00a79"));
            } else {
                ChatUtils.error("No plugins found.");
            }
            this.c(false);
        }
        return true;
    }
}

